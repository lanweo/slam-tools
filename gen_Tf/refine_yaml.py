import yaml

def convert_to_yaml(input_text):
    # 提取yaml内容
    yaml_content = input_text.split("frame_yaml=", 1)[1].strip('")\n')
    
    # 修复缩进问题并转换为标准YAML格式
    yaml_content = "\n".join([line if line.startswith(" ") else f"\n{line}" 
                            if line.strip() else line 
                            for line in yaml_content.split("\\n")])
    
    # 保存YAML文件
    with open("tf_frames.yaml", "w") as f:
        f.write(yaml_content)
    
    print("YAML文件已生成：tf_frames.yaml")
    return yaml_content

if __name__ == "__main__":
    input_data = """Result:tf2_msgs.srv.FrameGraph_Response(frame_yaml="FP_IMUH: \n  parent: 'FP_POI'\n  broadcaster: 'default_authority'\n  rate: 202.110\n  most_recent_transform: 1743044873.241281\n  oldest_transform: 1743044868.209360\n  buffer_length: 5.032\nFP_CAM: \n  parent: 'FP_VRTK'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\nFP_VRTK: \n  parent: 'FP_POI'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\n FP_ECEF: \n  parent: 'sensor_kit_base_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\nsensor_kit_base_link: \n  parent: 'base_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\ncamera0/camera_link: \n  parent: 'sensor_kit_base_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\ncamera0/camera_optical_link: \n  parent: 'camera0/camera_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\ncamera1/camera_link: \n  parent: 'sensor_kit_base_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\ncamera1/camera_optical_link: \n  parent: 'camera1/camera_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\ncamera2/camera_link: \n  parent: 'sensor_kit_base_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\ncamera2/camera_optical_link: \n  parent: 'camera2/camera_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\ncamera3/camera_link: \n  parent: 'sensor_kit_base_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\ncamera3/camera_optical_link: \n  parent: 'camera3/camera_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\ncamera4/camera_link: \n  parent: 'sensor_kit_base_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\ncamera4/camera_optical_link: \n  parent: 'camera4/camera_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\ngnss_link: \n  parent: 'sensor_kit_base_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\nrslidar1_base_link: \n  parent: 'sensor_kit_base_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\nrslidar1: \n  parent: 'rslidar1_base_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\nseyond_base_link: \n  parent: 'sensor_kit_base_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\nseyond: \n  parent: 'seyond_base_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\ntamagawa/imu_link: \n  parent: 'sensor_kit_base_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\nvelodyne_back_base_link: \n  parent: 'sensor_kit_base_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\nvelodyne_back: \n  parent: 'velodyne_back_base_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\nvelodyne_front_base_link: \n  parent: 'sensor_kit_base_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\nvelodyne_front: \n  parent: 'velodyne_front_base_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\nvelodyne_left_base_link: \n  parent: 'sensor_kit_base_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\nvelodyne_left: \n  parent: 'velodyne_left_base_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\nvelodyne_right_base_link: \n  parent: 'sensor_kit_base_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\nvelodyne_right: \n  parent: 'velodyne_right_base_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\nvelodyne_top_base_link: \n  parent: 'sensor_kit_base_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\nvelodyne_top: \n  parent: 'velodyne_top_base_link'\n  broadcaster: 'default_authority'\n  rate: 10000.000\n  most_recent_transform: 0.000000\n  oldest_transform: 0.000000\n  buffer_length: 0.000\nFP_POISH: \n  parent: 'FP_POI'\n  broadcaster: 'default_authority'\n  rate: 10.204\n  most_recent_transform: 1743044873.200000\n  oldest_transform: 1743044868.300000\n  buffer_length: 4.900\n")"""  # 替换为您的原始数据
    convert_to_yaml(input_data)